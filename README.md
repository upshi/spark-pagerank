# 爬取网页并用Spark PageRank计算网页排序

## 接口说明

### 返回值类型参考

#### Task 类型
```
{
      "id": 1,
      "startUrl": "http://sports.sina.com.cn/",
      "hasHandled": 10263,
      "totalUrl": 10000,
      "status": 4,
      "createTime": "2017-04-11 21:18:38",
      "crawlStartTime": "2017-04-11 21:18:38",
      "crawlEndTime": "2017-04-11 21:34:41",
      "exportTime": "2017-04-11 21:34:41",
      "pageRankTime": "2017-04-11 21:34:45"
}
```

#### Result 类型
```
{
      "url": "http://sports.sina.com.cn/",
      "title": "新浪体育_新浪网",
      "rank": "0.15462049617670087"
}
```


### 1. 提交任务
- 接口说明 

|名称 |请求方法  |URL  |
| :--------: | :--------: | :-------- |
| 提交任务 | POST  | /api/start |

- 请求参数

| 名称 |类型  |是否必须  |示例值  |更多限制  |说明  |
| :--------: | :--------: | :--------: | :--------: | :-------- | :-------- |
| startUrl |String  |是  |http://www.qq.com  |  | 入口URL |
| total | Integer |是  |10000  |  | 爬取的网页总数  |

- 返回值**data**说明

| 名称 |类型  |示例值  |说明  |
| :--------: | :--------: | :--------: | :-------- |
| taskId |Integer  | 1  | 任务ID  | 


### 2. 查询任务
- 接口说明 

|名称 |请求方法  |URL  |
| :--------: | :--------: | :-------- |
| 查询任务 | POST  | /api/getTask |

- 请求参数

| 名称 |类型  |是否必须  |示例值  |更多限制  |说明  |
| :--------: | :--------: | :--------: | :--------: | :-------- | :-------- |
| taskId |Integer  |是  | 1  |  | 任务ID |

- 返回值**data**说明

| 名称 |类型  |示例值  |说明  |
| :--------: | :--------: | :--------: | :-------- |
| task | Task  | 见返回值类型参考  | 任务详细信息  | 

- 返回值**error**说明

| 原因 |说明  |
| :-------- | :------------------------------------- |
| 您输入的ID不存在 | 请求参数taskId不存在|


### 3. 批量查询任务
- 接口说明 

|名称 |请求方法  |URL  |
| :--------: | :--------: | :-------- |
| 批量查询任务 | POST  | /api/getTasks |

- 请求参数

| 名称 |类型  |是否必须  |示例值  |更多限制  |说明  |
| :--------: | :--------: | :--------: | :--------: | :-------- | :-------- |
| page |Integer  |否  | 1  |  | 页码 |
| size |Integer  |否  | 10  |  | 分页大小 |

- 返回值**data**说明

| 名称 |类型  |示例值  |说明  |
| :--------: | :--------: | :--------: | :-------- |
|page |Integer |1  |当前页 |
|size |Integer |10  |分页大小 |
|total |Integer |100  |总数 |
| tasks |Task[] | 见返回值类型参考 |任务详细信息(数组)  | 


### 4. 查询任务结果
- 接口说明 

|名称 |请求方法  |URL  |
| :--------: | :--------: | :-------- |
| 查询任务结果 | POST  | /api/getResult |

- 请求参数

| 名称 |类型  |是否必须  |示例值  |更多限制  |说明  |
| :--------: | :--------: | :--------: | :--------: | :-------- | :-------- |
| taskId |Integer  |是  | 1  |  | 任务ID |

- 返回值**data**说明

| 名称 |类型  |示例值  |说明  |
| :--------: | :--------: | :--------: | :-------- |
|result |Result[] | 见返回值类型参考 | 结果详细信息(数组) |


- 返回值**error**说明

| 原因 |说明  |
| :-------- | :------------------------------------- |
| 您输入的ID不存在 | 请求参数taskId不存在|
|任务尚未完成 | 任务尚未完成 |

### 5. 清空数据
- 接口说明 

|名称 |请求方法  |URL  |
| :--------: | :--------: | :-------- |
| 清空数据 | post  | /api/truncate |

- 请求参数

| 名称 |类型  |是否必须  |示例值  |更多限制  |说明  |
| :--------: | :--------: | :--------: | :--------: | :-------- | :-------- |
| password |String  |是  | abcdef  |  | 密码 |

- 返回值**data**说明

无


- 返回值**error**说明

| 原因 |说明  |
| :-------- | :------------------------------------- |
| 您的密码有误! | 您的密码有误!|
